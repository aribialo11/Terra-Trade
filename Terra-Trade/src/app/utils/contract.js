import Web3 from "web3";

const CONTRACT_ADDRESS = "0x094283cEc19B84d6b272204c2bbE8A06eFFDA2e6"; // Dirección del contrato
const CONTRACT_ABI = [
  0x608060405234801561001057600080fd5b50600436106101575760003560e01c80636b20c454116100c3578063a22cb4651161007c578063a22cb4651461039c578063bd85b039146103b8578063e985e9c5146103e8578063f242432a14610418578063f2fde38b14610434578063f5298aca1461045057610157565b80636b20c45414610302578063715018a61461031e578063731133e9146103285780638456cb59146103445780638da5cb5b1461034e57806392ab723e1461036c57610157565b80631f7fdffa116101155780631f7fdffa146102425780632eb2c2d61461025e5780633f4ba83a1461027a5780634e1273f4146102845780634f558e79146102b45780635c975abb146102e457610157565b8062fdd58e1461015c57806301ffc9a71461018c57806302fe5305146101bc5780630e89341c146101d8578063127217d61461020857806318160ddd14610224575b600080fd5b610176600480360381019061017191906120c9565b61046c565b6040516101839190612118565b60405180910390f35b6101a660048036038101906101a1919061218b565b6104c6565b6040516101b391906121d3565b60405180910390f35b6101d660048036038101906101d19190612334565b6105a8565b005b6101f260048036038101906101ed919061237d565b6105bc565b6040516101ff9190612429565b60405180910390f35b610222600480360381019061021d91906124ec565b610650565b005b61022c610757565b6040516102399190612118565b60405180910390f35b61025c6004803603810190610257919061264b565b610761565b005b61027860048036038101906102739190612706565b61077b565b005b610282610823565b005b61029e60048036038101906102999190612898565b610835565b6040516102ab91906129ce565b60405180910390f35b6102ce60048036038101906102c9919061237d565b610944565b6040516102db91906121d3565b60405180910390f35b6102ec610958565b6040516102f991906121d3565b60405180910390f35b61031c600480360381019061031791906129f0565b61096f565b005b610326610a1b565b005b610342600480360381019061033d9190612a7b565b610a2f565b005b61034c610a49565b005b610356610a5b565b6040516103639190612b0d565b60405180910390f35b6103866004803603810190610381919061237d565b610a85565b6040516103939190612118565b60405180910390f35b6103b660048036038101906103b19190612b54565b610a97565b005b6103d260048036038101906103cd919061237d565b610aad565b6040516103df9190612118565b60405180910390f35b61040260048036038101906103fd9190612b94565b610aca565b60405161040f91906121d3565b60405180910390f35b610432600480360381019061042d91906124ec565b610b5e565b005b61044e60048036038101906104499190612bd4565b610c06565b005b61046a60048036038101906104659190612c01565b610c8c565b005b600080600083815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905092915050565b60007fd9b67a26000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916148061059157507f0e89341c000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916145b806105a157506105a082610d38565b5b9050919050565b6105b0610da2565b6105b981610e29565b50565b6060600280546105cb90612c83565b80601f01602080910402602001604051908101604052809291908181526020018280546105f790612c83565b80156106445780601f1061061957610100808354040283529160200191610644565b820191906000526020600020905b81548152906001019060200180831161062757829003601f168201915b50505050509050919050565b610658610e3c565b73ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff16148061069e575061069d85610698610e3c565b610aca565b5b6106dd576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106d490612d26565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610743576040517fea553b3400000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6107508585858585610e44565b5050505050565b6000600554905090565b610769610da2565b61077584848484610f4f565b50505050565b6000610785610e3c565b90508073ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff16141580156107ca57506107c88682610aca565b155b1561080e5780866040517fe237d922000000000000000000000000000000000000000000000000000000008152600401610805929190612d46565b60405180910390fd5b61081b8686868686610fd5565b505050505050565b61082b610da2565b6108336110cd565b565b6060815183511461088157815183516040517f5b059991000000000000000000000000000000000000000000000000000000008152600401610878929190612d6f565b60405180910390fd5b6000835167ffffffffffffffff81111561089e5761089d612209565b5b6040519080825280602002602001820160405280156108cc5781602001602082028036833780820191505090505b50905060005b8451811015610939576109096108f1828761113090919063ffffffff16565b610904838761114490919063ffffffff16565b61046c565b82828151811061091c5761091b612d98565b5b6020026020010181815250508061093290612df6565b90506108d2565b508091505092915050565b60008061095083610aad565b119050919050565b6000600360149054906101000a900460ff16905090565b610977610e3c565b73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16141580156109c057506109be836109b9610e3c565b610aca565b155b15610a0b576109cd610e3c565b836040517fe237d922000000000000000000000000000000000000000000000000000000008152600401610a02929190612d46565b60405180910390fd5b610a16838383611158565b505050565b610a23610da2565b610a2d60006111ec565b565b610a37610da2565b610a43848484846112b2565b50505050565b610a51610da2565b610a5961134b565b565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6000610a9082610aad565b9050919050565b610aa9610aa2610e3c565b83836113ae565b5050565b600060046000838152602001908152602001600020549050919050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060009054906101000a900460ff16905092915050565b6000610b68610e3c565b90508073ffffffffffffffffffffffffffffffffffffffff168673ffffffffffffffffffffffffffffffffffffffff1614158015610bad5750610bab8682610aca565b155b15610bf15780866040517fe237d922000000000000000000000000000000000000000000000000000000008152600401610be8929190612d46565b60405180910390fd5b610bfe8686868686610e44565b505050505050565b610c0e610da2565b600073ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff1603610c805760006040517f1e4fbdf7000000000000000000000000000000000000000000000000000000008152600401610c779190612b0d565b60405180910390fd5b610c89816111ec565b50565b610c94610e3c565b73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614158015610cdd5750610cdb83610cd6610e3c565b610aca565b155b15610d2857610cea610e3c565b836040517fe237d922000000000000000000000000000000000000000000000000000000008152600401610d1f929190612d46565b60405180910390fd5b610d3383838361151e565b505050565b60007f01ffc9a7000000000000000000000000000000000000000000000000000000007bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916827bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916149050919050565b610daa610e3c565b73ffffffffffffffffffffffffffffffffffffffff16610dc8610a5b565b73ffffffffffffffffffffffffffffffffffffffff1614610e2757610deb610e3c565b6040517f118cdaa7000000000000000000000000000000000000000000000000000000008152600401610e1e9190612b0d565b60405180910390fd5b565b8060029081610e389190612fea565b5050565b600033905090565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610eb65760006040517f57f447ce000000000000000000000000000000000000000000000000000000008152600401610ead9190612b0d565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff1603610f285760006040517f01a83514000000000000000000000000000000000000000000000000000000008152600401610f1f9190612b0d565b60405180910390fd5b600080610f3585856115c5565b91509150610f4687878484876115f5565b50505050505050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603610fc15760006040517f57f447ce000000000000000000000000000000000000000000000000000000008152600401610fb89190612b0d565b60405180910390fd5b610fcf6000858585856115f5565b50505050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036110475760006040517f57f447ce00000000000000000000000000000000000000000000000000000000815260040161103e9190612b0d565b60405180910390fd5b600073ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff16036110b95760006040517f01a835140000000000000000000000000000000000000000000000000000000081526004016110b09190612b0d565b60405180910390fd5b6110c685858585856115f5565b5050505050565b6110d56116a7565b6000600360146101000a81548160ff0219169083151502179055507f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa611119610e3c565b6040516111269190612b0d565b60405180910390a1565b600060208202602084010151905092915050565b600060208202602084010151905092915050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036111ca5760006040517f01a835140000000000000000000000000000000000000000000000000000000081526004016111c19190612b0d565b60405180910390fd5b6111e78360008484604051806020016040528060008152506115f5565b505050565b6000600360009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905081600360006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16036113245760006040517f57f447ce00000000000000000000000000000000000000000000000000000000815260040161131b9190612b0d565b60405180910390fd5b60008061133185856115c5565b915091506113436000878484876115f5565b505050505050565b6113536116e7565b6001600360146101000a81548160ff0219169083151502179055507f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a258611397610e3c565b6040516113a49190612b0d565b60405180910390a1565b600073ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036114205760006040517fced3e1000000000000000000000000000000000000000000000000000000000081526004016114179190612b0d565b60405180910390fd5b80600160008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060006101000a81548160ff0219169083151502179055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c318360405161151191906121d3565b60405180910390a3505050565b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16036115905760006040517f01a835140000000000000000000000000000000000000000000000000000000081526004016115879190612b0d565b60405180910390fd5b60008061159d84846115c5565b915091506115be8560008484604051806020016040528060008152506115f5565b5050505050565b60608060405191506001825283602083015260408201905060018152826020820152604081016040529250929050565b61160185858585611728565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff16146116a057600061163f610e3c565b9050600184510361168f57600061166060008661114490919063ffffffff16565b9050600061167860008661114490919063ffffffff16565b905061168883898985858961173a565b505061169e565b61169d8187878787876118ee565b5b505b5050505050565b6116af610958565b6116e5576040517f8dfc202b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b565b6116ef610958565b15611726576040517fd93c066500000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b565b61173484848484611aa2565b50505050565b60008473ffffffffffffffffffffffffffffffffffffffff163b11156118e6578373ffffffffffffffffffffffffffffffffffffffff1663f23a6e6187878686866040518663ffffffff1660e01b815260040161179b959493929190613111565b6020604051808303816000875af19250505080156117d757506040513d601f19601f820116820180604052508101906117d49190613180565b60015b61185b573d8060008114611807576040519150601f19603f3d011682016040523d82523d6000602084013e61180c565b606091505b50600081510361185357846040517f57f447ce00000000000000000000000000000000000000000000000000000000815260040161184a9190612b0d565b60405180910390fd5b805181602001fd5b63f23a6e6160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916146118e457846040517f57f447ce0000000000000000000000000000000000000000000000000000000081526004016118db9190612b0d565b60405180910390fd5b505b505050505050565b60008473ffffffffffffffffffffffffffffffffffffffff163b1115611a9a578373ffffffffffffffffffffffffffffffffffffffff1663bc197c8187878686866040518663ffffffff1660e01b815260040161194f9594939291906131ad565b6020604051808303816000875af192505050801561198b57506040513d601f19601f820116820180604052508101906119889190613180565b60015b611a0f573d80600081146119bb576040519150601f19603f3d011682016040523d82523d6000602084013e6119c0565b606091505b506000815103611a0757846040517f57f447ce0000000000000000000000000000000000000000000000000000000081526004016119fe9190612b0d565b60405180910390fd5b805181602001fd5b63bc197c8160e01b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916817bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191614611a9857846040517f57f447ce000000000000000000000000000000000000000000000000000000008152600401611a8f9190612b0d565b60405180910390fd5b505b505050505050565b611aae84848484611c59565b600073ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff1603611b8e576000805b8351811015611b72576000838281518110611b0457611b03612d98565b5b602002602001015190508060046000878581518110611b2657611b25612d98565b5b602002602001015181526020019081526020016000206000828254611b4b9190613215565b925050819055508083611b5e9190613215565b92505080611b6b90612df6565b9050611ae6565b508060056000828254611b859190613215565b92505081905550505b600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1603611c53576000805b8351811015611c40576000838281518110611be457611be3612d98565b5b602002602001015190508060046000878581518110611c0657611c05612d98565b5b602002602001015181526020019081526020016000206000828254039250508190555080830192505080611c3990612df6565b9050611bc6565b5080600560008282540392505081905550505b50505050565b611c616116e7565b611c6d84848484611c73565b50505050565b8051825114611cbd57815181516040517f5b059991000000000000000000000000000000000000000000000000000000008152600401611cb4929190612d6f565b60405180910390fd5b6000611cc7610e3c565b905060005b8351811015611edc576000611cea828661114490919063ffffffff16565b90506000611d01838661114490919063ffffffff16565b9050600073ffffffffffffffffffffffffffffffffffffffff168873ffffffffffffffffffffffffffffffffffffffff1614611e2e57600080600084815260200190815260200160002060008a73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054905081811015611dd657888183856040517f03dee4c5000000000000000000000000000000000000000000000000000000008152600401611dcd9493929190613249565b60405180910390fd5b81810360008085815260200190815260200160002060008b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550505b600073ffffffffffffffffffffffffffffffffffffffff168773ffffffffffffffffffffffffffffffffffffffff1614611ec9578060008084815260200190815260200160002060008973ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611ec19190613215565b925050819055505b505080611ed590612df6565b9050611ccc565b506001835103611f9b576000611efc60008561114490919063ffffffff16565b90506000611f1460008561114490919063ffffffff16565b90508573ffffffffffffffffffffffffffffffffffffffff168773ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fc3d58168c5ae7397731d063d5bbf3d657854427343f4c083240f7aacaa2d0f628585604051611f8c929190612d6f565b60405180910390a4505061201a565b8373ffffffffffffffffffffffffffffffffffffffff168573ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff167f4a39dc06d4c0dbc64b70af90fd698a233a518aa5d07e595d983b8c0526c8f7fb868660405161201192919061328e565b60405180910390a45b5050505050565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061206082612035565b9050919050565b61207081612055565b811461207b57600080fd5b50565b60008135905061208d81612067565b92915050565b6000819050919050565b6120a681612093565b81146120b157600080fd5b50565b6000813590506120c38161209d565b92915050565b600080604083850312156120e0576120df61202b565b5b60006120ee8582860161207e565b92505060206120ff858286016120b4565b9150509250929050565b61211281612093565b82525050565b600060208201905061212d6000830184612109565b92915050565b60007fffffffff0000000000000000000000000000000000000000000000000000000082169050919050565b61216881612133565b811461217357600080fd5b50565b6000813590506121858161215f565b92915050565b6000602082840312156121a1576121a061202b565b5b60006121af84828501612176565b91505092915050565b60008115159050919050565b6121cd816121b8565b82525050565b60006020820190506121e860008301846121c4565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b612241826121f8565b810181811067ffffffffffffffff821117156122605761225f612209565b5b80604052505050565b6000612273612021565b905061227f8282612238565b919050565b600067ffffffffffffffff82111561229f5761229e612209565b5b6122a8826121f8565b9050602081019050919050565b82818337600083830152505050565b60006122d76122d284612284565b612269565b9050828152602081018484840111156122f3576122f26121f3565b5b6122fe8482856122b5565b509392505050565b600082601f83011261231b5761231a6121ee565b5b813561232b8482602086016122c4565b91505092915050565b60006020828403121561234a5761234961202b565b5b600082013567ffffffffffffffff81111561236857612367612030565b5b61237484828501612306565b91505092915050565b6000602082840312156123935761239261202b565b5b60006123a1848285016120b4565b91505092915050565b600081519050919050565b600082825260208201905092915050565b60005b838110156123e45780820151818401526020810190506123c9565b60008484015250505050565b60006123fb826123aa565b61240581856123b5565b93506124158185602086016123c6565b61241e816121f8565b840191505092915050565b6000602082019050818103600083015261244381846123f0565b905092915050565b600067ffffffffffffffff82111561246657612465612209565b5b61246f826121f8565b9050602081019050919050565b600061248f61248a8461244b565b612269565b9050828152602081018484840111156124ab576124aa6121f3565b5b6124b68482856122b5565b509392505050565b600082601f8301126124d3576124d26121ee565b5b81356124e384826020860161247c565b91505092915050565b600080600080600060a086880312156125085761250761202b565b5b60006125168882890161207e565b95505060206125278882890161207e565b9450506040612538888289016120b4565b9350506060612549888289016120b4565b925050608086013567ffffffffffffffff81111561256a57612569612030565b5b612576888289016124be565b9150509295509295909350565b600067ffffffffffffffff82111561259e5761259d612209565b5b602082029050602081019050919050565b600080fd5b60006125c76125c284612583565b612269565b905080838252602082019050602084028301858111156125ea576125e96125af565b5b835b8181101561261357806125ff88826120b4565b8452602084019350506020810190506125ec565b5050509392505050565b600082601f830112612632576126316121ee565b5b81356126428482602086016125b4565b91505092915050565b600080600080608085870312156126655761266461202b565b5b60006126738782880161207e565b945050602085013567ffffffffffffffff81111561269457612693612030565b5b6126a08782880161261d565b935050604085013567ffffffffffffffff8111156126c1576126c0612030565b5b6126cd8782880161261d565b925050606085013567ffffffffffffffff8111156126ee576126ed612030565b5b6126fa878288016124be565b91505092959194509250565b600080600080600060a086880312156127225761272161202b565b5b60006127308882890161207e565b95505060206127418882890161207e565b945050604086013567ffffffffffffffff81111561276257612761612030565b5b61276e8882890161261d565b935050606086013567ffffffffffffffff81111561278f5761278e612030565b5b61279b8882890161261d565b925050608086013567ffffffffffffffff8111156127bc576127bb612030565b5b6127c8888289016124be565b9150509295509295909350565b600067ffffffffffffffff8211156127f0576127ef612209565b5b602082029050602081019050919050565b600061281461280f846127d5565b612269565b90508083825260208201905060208402830185811115612837576128366125af565b5b835b81811015612860578061284c888261207e565b845260208401935050602081019050612839565b5050509392505050565b600082601f83011261287f5761287e6121ee565b5b813561288f848260208601612801565b91505092915050565b600080604083850312156128af576128ae61202b565b5b600083013567ffffffffffffffff8111156128cd576128cc612030565b5b6128d98582860161286a565b925050602083013567ffffffffffffffff8111156128fa576128f9612030565b5b6129068582860161261d565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b61294581612093565b82525050565b6000612957838361293c565b60208301905092915050565b6000602082019050919050565b600061297b82612910565b612985818561291b565b93506129908361292c565b8060005b838110156129c15781516129a8888261294b565b97506129b383612963565b925050600181019050612994565b5085935050505092915050565b600060208201905081810360008301526129e88184612970565b905092915050565b600080600060608486031215612a0957612a0861202b565b5b6000612a178682870161207e565b935050602084013567ffffffffffffffff811115612a3857612a37612030565b5b612a448682870161261d565b925050604084013567ffffffffffffffff811115612a6557612a64612030565b5b612a718682870161261d565b9150509250925092565b60008060008060808587031215612a9557612a9461202b565b5b6000612aa38782880161207e565b9450506020612ab4878288016120b4565b9350506040612ac5878288016120b4565b925050606085013567ffffffffffffffff811115612ae657612ae5612030565b5b612af2878288016124be565b91505092959194509250565b612b0781612055565b82525050565b6000602082019050612b226000830184612afe565b92915050565b612b31816121b8565b8114612b3c57600080fd5b50565b600081359050612b4e81612b28565b92915050565b60008060408385031215612b6b57612b6a61202b565b5b6000612b798582860161207e565b9250506020612b8a85828601612b3f565b9150509250929050565b60008060408385031215612bab57612baa61202b565b5b6000612bb98582860161207e565b9250506020612bca8582860161207e565b9150509250929050565b600060208284031215612bea57612be961202b565b5b6000612bf88482850161207e565b91505092915050565b600080600060608486031215612c1a57612c1961202b565b5b6000612c288682870161207e565b9350506020612c39868287016120b4565b9250506040612c4a868287016120b4565b9150509250925092565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680612c9b57607f821691505b602082108103612cae57612cad612c54565b5b50919050565b7f546572726154726164653a2063616c6c6572206973206e6f74206f776e65722060008201527f6e6f7220617070726f7665640000000000000000000000000000000000000000602082015250565b6000612d10602c836123b5565b9150612d1b82612cb4565b604082019050919050565b60006020820190508181036000830152612d3f81612d03565b9050919050565b6000604082019050612d5b6000830185612afe565b612d686020830184612afe565b9392505050565b6000604082019050612d846000830185612109565b612d916020830184612109565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000612e0182612093565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8203612e3357612e32612dc7565b5b600182019050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302612ea07fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82612e63565b612eaa8683612e63565b95508019841693508086168417925050509392505050565b6000819050919050565b6000612ee7612ee2612edd84612093565b612ec2565b612093565b9050919050565b6000819050919050565b612f0183612ecc565b612f15612f0d82612eee565b848454612e70565b825550505050565b600090565b612f2a612f1d565b612f35818484612ef8565b505050565b5b81811015612f5957612f4e600082612f22565b600181019050612f3b565b5050565b601f821115612f9e57612f6f81612e3e565b612f7884612e53565b81016020851015612f87578190505b612f9b612f9385612e53565b830182612f3a565b50505b505050565b600082821c905092915050565b6000612fc160001984600802612fa3565b1980831691505092915050565b6000612fda8383612fb0565b9150826002028217905092915050565b612ff3826123aa565b67ffffffffffffffff81111561300c5761300b612209565b5b6130168254612c83565b613021828285612f5d565b600060209050601f8311600181146130545760008415613042578287015190505b61304c8582612fce565b8655506130b4565b601f19841661306286612e3e565b60005b8281101561308a57848901518255600182019150602085019450602081019050613065565b868310156130a757848901516130a3601f891682612fb0565b8355505b6001600288020188555050505b505050505050565b600081519050919050565b600082825260208201905092915050565b60006130e3826130bc565b6130ed81856130c7565b93506130fd8185602086016123c6565b613106816121f8565b840191505092915050565b600060a0820190506131266000830188612afe565b6131336020830187612afe565b6131406040830186612109565b61314d6060830185612109565b818103608083015261315f81846130d8565b90509695505050505050565b60008151905061317a8161215f565b92915050565b6000602082840312156131965761319561202b565b5b60006131a48482850161316b565b91505092915050565b600060a0820190506131c26000830188612afe565b6131cf6020830187612afe565b81810360408301526131e18186612970565b905081810360608301526131f58185612970565b9050818103608083015261320981846130d8565b90509695505050505050565b600061322082612093565b915061322b83612093565b925082820190508082111561324357613242612dc7565b5b92915050565b600060808201905061325e6000830187612afe565b61326b6020830186612109565b6132786040830185612109565b6132856060830184612109565b95945050505050565b600060408201905081810360008301526132a88185612970565b905081810360208301526132bc8184612970565b9050939250505056fea2646970667358221220c7de412d6d89b8148ddfe7f4077ef893bbeba218bc03754d8ea3b9302d4fa63e64736f6c63430008140033
];
let web3;
let contract;

export const initWeb3 = async () => {
  if (typeof window !== "undefined" && window.ethereum) {
    try {
      // Solicitar acceso a MetaMask
      await window.ethereum.request({ method: "eth_requestAccounts" });

      // Usar el proveedor de MetaMask
      web3 = new Web3(window.ethereum);

      // Verificar si el usuario está en Sepolia
      const networkId = await web3.eth.net.getId();
      if (networkId !== 11155111) {
        throw new Error("Por favor, conecta MetaMask a la red de prueba Sepolia.");
      }

      // Instanciar el contrato
      contract = new web3.eth.Contract(CONTRACT_ABI, CONTRACT_ADDRESS);
    } catch (error) {
      console.error("Error al inicializar Web3 con MetaMask:", error);
      throw error;
    }
  } else {
    throw new Error("MetaMask no está instalado. Por favor, instálala para continuar.");
  }
};

export const getContract = () => {
  if (!contract) {
    throw new Error("Web3 no está inicializado. Llama a `initWeb3` primero.");
  }
  return contract;
};